import test from 'tape';
import fs from 'fs';
import PolygonOffset from '../../../../src/server/lib/ToolPathGenerator/PolygonOffset';


test('test-margin', (t) => {
    // const points = [[3.667424601715684, 4.527176470588234], [3.667424601715684, 4.527176470588234], [3.7540834252450956, 4.421156372549018], [3.891542248774506, 4.1945485294117635], [3.9423422487745086, 4.073960784313725], [4.008830484068625, 3.8077588235294106], [4.030993229166665, 3.5012156862745085], [4.030993229166665, 3.5012156862745085], [4.022012959558822, 3.3112448529411753], [3.950170802696075, 2.9568899509803908], [3.8064864889705845, 2.636650735294116], [3.5909600183823507, 2.350527205882352], [3.456255974264703, 2.220258823529411], [3.308244944852941, 2.1018966911764703], [2.986262591911764, 1.9125172794117642], [2.629666513480391, 1.7862643382352936], [2.2384567095588217, 1.7231378676470577], [2.0298716605392144, 1.715247058823529], [2.0298716605392144, 1.715247058823529], [1.8335819546568608, 1.7229044117647057], [1.4406290134803896, 1.784163235294118], [1.243965778186272, 1.8377647058823525], [0.8784049938725467, 1.9724843137254906], [0.5666324448529387, 2.1335999999999995], [0.5666324448529387, 2.1335999999999995], [0.3883344056372522, 1.831788235294117], [0.05763636642156911, 1.831788235294117], [-0.00013618259804104582, 3.8408784313725484], [0.3345461703431347, 3.8408784313725484], [0.4468540134803902, 3.4865235294117634], [0.5765932291666651, 3.1685254901960778], [0.7372108762254896, 2.878666666666666], [0.9421540134803905, 2.608729411764705], [0.9421540134803905, 2.608729411764705], [1.0542750919117623, 2.492935294117647], [1.3057848958333338, 2.2986999999999993], [1.4451736213235264, 2.220258823529411], [1.5944608762254902, 2.1566343137254895], [1.9281471507352919, 2.083920588235294], [2.112546170343137, 2.074831372549019], [2.112546170343137, 2.074831372549019], [2.3794951899509797, 2.093507843137254], [2.6105853860294097, 2.14953725490196], [2.803575582107843, 2.239682352941176], [2.956224601715686, 2.3607058823529408], [2.956224601715686, 2.3607058823529408], [3.0710226409313712, 2.509121568627451], [3.152452052696077, 2.6814431372549015], [3.200263817401961, 2.8789156862745093], [3.216201072303921, 3.104776470588235], [3.216201072303921, 3.104776470588235], [3.2038123468137236, 3.2775960784313716], [3.1047025428921557, 3.6053058823529405], [3.0179814644607816, 3.7601960784313717], [2.9066696997549, 3.9029465686274505], [2.6108344056372523, 4.133538725490195], [2.4263108762254895, 4.221380392156862], [2.4263108762254895, 4.221380392156862], [2.1384442095588234, 4.333937254901961], [1.8107344056372554, 4.458447058823528], [1.4870089154411765, 4.585198039215685], [1.2110951899509779, 4.704478431372547], [1.2110951899509779, 4.704478431372547], [0.976892248774508, 4.824692647058821], [0.5914098958333334, 5.1170416666666645], [0.4401304840686251, 5.289176470588234], [0.31985401348039133, 5.484221078431371], [0.1823951899509808, 5.956860294117645], [0.16521283700980405, 6.234454901960783], [0.16521283700980405, 6.234454901960783], [0.17374175857843, 6.398932352941175], [0.24197313112744823, 6.710704901960783], [0.3016755821078405, 6.857999999999998], [0.3771285232843127, 6.999007352941175], [0.5713638174019593, 7.257489705882351], [0.6901461703431373, 7.37496470588235], [0.6901461703431373, 7.37496470588235], [0.815589797794118, 7.476751470588233], [1.0989741115196061, 7.64558676470588], [1.256914797794117, 7.7126352941176455], [1.4220770526960784, 7.7658009803921555], [1.7632339154411767, 7.826561764705881], [1.9392285232843136, 7.834156862745097], [1.9392285232843136, 7.834156862745097], [2.1362030330882327, 7.826374999999999], [2.498775582107843, 7.764120098039214], [2.664373621323527, 7.709647058823528], [2.9709167585784293, 7.57567450980392], [3.249071660539215, 7.4207843137254885], [3.249071660539215, 7.4207843137254885], [3.41940107230392, 7.701678431372546], [3.7500991115196065, 7.701678431372546], [3.7829696997549007, 5.754345098039214], [3.448287346813725, 5.754345098039214], [3.3511696997549016, 6.082552941176469], [3.243095189950978, 6.395819607843136], [3.1123598958333325, 6.687172549019605], [2.9472598958333336, 6.949639215686272], [2.9472598958333336, 6.949639215686272], [2.853690778186273, 7.063565686274507], [2.637043719362744, 7.254812745098037], [2.513965778186275, 7.332133333333331], [2.3783123468137255, 7.394450490196077], [2.064049601715684, 7.465670098039214], [1.8854402879901961, 7.474572549019605], [1.8854402879901961, 7.474572549019605], [1.695998621323529, 7.458822058823527], [1.3608182291666644, 7.3328181372548995], [1.2150795036764706, 7.222564705882352], [1.093931464460784, 7.089525980392155], [0.9554765624999995, 6.781239705882351], [0.9381696997549014, 6.605992156862743], [0.9381696997549014, 6.605992156862743], [0.949313327205882, 6.423896568627448], [1.0384623468137235, 6.108637745098037], [1.116467738970588, 5.975474509803919], [1.2152662683823507, 5.856007352941175], [1.4737486213235265, 5.6503171568627435], [1.6334324448529394, 5.564094117647057], [1.6334324448529394, 5.564094117647057], [1.9325049938725485, 5.42937450980392], [2.2260991115196056, 5.314078431372548], [2.5132187193627438, 5.2050078431372535], [2.790875582107841, 5.0889647058823515], [2.790875582107841, 5.0889647058823515], [3.034167738970588, 4.974166666666665], [3.267997150735294, 4.844925490196077], [3.4824030330882323, 4.697256862745097], [3.667424601715684, 4.527176470588234]];
    // const points = [[54.14142135623731, 50.989949493661165]];
    const points = [[0, 0],
        [60, 60],
        [0, 60],
        [60, 0]];
    for (let j = 0; j < 1; j++) {
        // const points = [];
        // const len = Math.abs(Math.ceil(Math.random() * 100));
        // for (let k = 0; k < len; k++) {
        //     points.push([Math.ceil(Math.random() * 100), Math.ceil(Math.random() * 100)]);
        // }
        try {
            // eslint-disable-next-line no-unused-vars
            const result = new PolygonOffset(points).margin(1);
            fs.writeFileSync('./test/threejs/data.js', `const data = ${JSON.stringify(result[0])};`);
        } catch (e) {
            console.log(e);
            console.log(points);
        }
    }

    t.end();
});

// test('test-martinez-polygon-clipping', (t) => {
//     const points = [[0, 20], [100, 80], [10, 80], [0, 20]];
//     // const points = [
//     //     [10, 46],
//     //     [17, 42],
//     //     [5, 46],
//     //     [17, 42]
//     // ];
//     // const points = [
//     //     [10, 10],
//     //     [10, 40],
//     //     [20, 30],
//     //     [0, 30],
//     //     [10, 30]
//     // ];
//
//     const result = new PolygonOffset(points).margin(1);
//     console.log(JSON.stringify(result));
//
//     t.end();
// });
